<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<link href="./css/jquery-ui-1.10.3.custom.min.css" rel="stylesheet"/>
<link href="./css/jquery.appendGrid-1.4.1.css" rel="stylesheet"/>
<script type="text/javascript" src="./js/jquery-1.9.1.js"></script>
<script type="text/javascript" src="./js/jquery-ui-1.10.3.custom.min.js"></script>
<script type="text/javascript" src="./js/jquery.appendGrid-1.4.1.js"></script>
<script type="text/javascript" src="./js/rulebuilder.js"></script>
<style type="text/css">
.ui-widget-content { 
border:0;
background: #eee url(images/ui-bg_highlight-soft_100_eeeeee_1x100.png) 50% top repeat-x;
color: #333;
}
</style>
<script type="text/javascript">
	var cfgData = [{"rule":"mediaType","params":[{"value":"other","percent":"100","target":"0"},{"value":"video","percent":"100","target":{"rule":"taobaoUser","params":[{"value":"true,false,","percent":"100","target":"0"}]}}]}] ;
	var rules = [
			{
				"name": "taobaoUser",
				"text": "淘宝用户",
				"vtype": "select",
				"values": [
					{
						"name": "true",
						"text": "是"
					},
					{
						"name": "false",
						"text": "否"
					}
				]
			},
			{
				"name": "mediaType",
				"text": "媒体类型",
				"vtype": "select",
				"values": [
					{
						"name": "video",
						"text": "视频"
					},
					{
						"name": "other",
						"text": "其他"
					}
				]
			},
			{
				"name": "allUser",
				"text": "所有用户",
				"vtype": "select",
				"values": [
					{
						"name": "true",
						"text": "是"
					}
				]
			},
			{
				"name": "pri",
				"text": "权限",
				"vtype": "checkbox",
				"values": [
					{
						"name": "cpc",
						"text": "CPC"
					},
					{
						"name": "cpm",
						"text": "CPM"
					},{
						"name": "cps",
						"text": "CPS"
					}
				]
			},
			{
				"name": "res",
				"text": "资源类型",
				"vtype": "select",
				"values": [
					{
						"name": "all",
						"text": "ALL"
					},
					{
						"name": "app",
						"text": "APP"
					},{
						"name": "ecom",
						"text": "ECOM"
					}
				]
			}
		];
	
	var ruleBuilder;
    $(function () {
		var targets = { "0": 'H5', "1": '店铺', "2": 'Tanx', "3": '外投外', "_sub": '子规则'};
        ruleBuilder = new RuleBuilder({'tableId':'tblAppendGrid','rules':rules,'targets':targets});
    });
	
	function add(){
		ruleBuilder.addRow();
	}
	function load(){
		ruleBuilder.load(cfgData);
	}
	function getvalue(){
		var s = ruleBuilder.getvalue();
		console.log(JSON.stringify(s));
	}
</script>
</head>
<body>
	<input type='button' value='value' onclick='getvalue()'/>
	<input type='button' value='add' onclick='add()'/>
	<input type='button' value='load' onclick='load()'/>
    <table id="tblAppendGrid"></table>
</body>
</html>